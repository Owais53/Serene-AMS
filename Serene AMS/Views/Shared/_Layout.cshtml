<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title - My ASP.NET Application</title>

    <!-- THEME STYLES-->

    <link href="~/Content/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Content/font-awesome.min.css" rel="stylesheet" />
    <link href="~/Content/themify-icons.css" rel="stylesheet" />
    <!-- PLUGINS STYLES-->
    <!-- THEME STYLES-->

    <link href="~/Content/main.min.css" rel="stylesheet" />
    <link href="~/Content/datatables.min.css" rel="stylesheet" />
    <link href="~/Content/themes/base/jquery-ui.min.css" rel="stylesheet" />
    <link href="~/Content/alertifyjs/alertify.min.css" rel="stylesheet" />
    <link href="~/Content/alertifyjs/themes/default.min.css" rel="stylesheet" />
    <link href="~/Content/wickedpicker.css" rel="stylesheet" />
    <link href="~/Content/sweetalert.css" rel="stylesheet" />
    <link href="~/Content/bootstrap-datepicker3.min.css" rel="stylesheet" />
    <link href="~/Content/jquery.timeselector.css" rel="stylesheet" />
    <link href="~/Content/bootstrap-timepicker.min.css" rel="stylesheet" />
    <link href="~/Content/themes/base/jquery-ui.css" rel="stylesheet" />
    <style type="text/css">
        .breadcrumb-item + .breadcrumb-item::before {
            content: ">";
        }
    </style>
    @RenderSection("header", required: false)
</head>
<body class="fixed-navbar">
    <div class="page-wrapper">
        <!-- START HEADER-->
        <header class="header">
            <div class="page-brand">
                <a class="link" href="index.html">
                    <span class="brand">
                        Admin
                        <span class="brand-tip">CAST</span>
                    </span>
                    <span class="brand-mini">AC</span>
                </a>
            </div>
            <div class="flexbox flex-1">
                <!-- START TOP-LEFT TOOLBAR-->
                <ul class="nav navbar-toolbar">
                    <li>
                        <a class="nav-link sidebar-toggler js-sidebar-toggler"><i class="ti-menu"></i></a>
                    </li>
                    <li>
                        <form class="navbar-search" action="javascript:;">
                            <div class="rel">
                                <span class="search-icon"><i class="ti-search"></i></span>
                                <input class="form-control" placeholder="Search here...">
                            </div>
                        </form>
                    </li>
                </ul>
                <!-- END TOP-LEFT TOOLBAR-->
                <!-- START TOP-RIGHT TOOLBAR-->
               
                <ul class="nav navbar-toolbar">
                    <li class="dropdown dropdown-inbox">
                        <a class="nav-link dropdown-toggle" data-toggle="dropdown">
                            <i class="fa fa-envelope-o"></i>
                            <span class="badge badge-primary envelope-badge">9</span>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-right dropdown-menu-media">
                            <li class="dropdown-menu-header">
                                <div>
                                    <span><strong>9 New</strong> Messages</span>
                                    <a class="pull-right" href="mailbox.html">view all</a>
                                </div>
                            </li>
                            <li class="list-group list-group-divider scroller" data-height="240px" data-color="#71808f">
                                <div>
                                    <a class="list-group-item">
                                        <div class="media">
                                            <div class="media-img">
                                                <img src="./assets/img/users/u1.jpg" />
                                            </div>
                                            <div class="media-body">
                                                <div class="font-strong"> </div>Jeanne Gonzalez<small class="text-muted float-right">Just now</small>
                                                <div class="font-13">Your proposal interested me.</div>
                                            </div>
                                        </div>
                                    </a>
                                    <a class="list-group-item">
                                        <div class="media">
                                            <div class="media-img">
                                                <img src="./assets/img/users/u2.jpg" />
                                            </div>
                                            <div class="media-body">
                                                <div class="font-strong"></div>Becky Brooks<small class="text-muted float-right">18 mins</small>
                                                <div class="font-13">Lorem Ipsum is simply.</div>
                                            </div>
                                        </div>
                                    </a>
                                    <a class="list-group-item">
                                        <div class="media">
                                            <div class="media-img">
                                                <img src="./assets/img/users/u3.jpg" />
                                            </div>
                                            <div class="media-body">
                                                <div class="font-strong"></div>Frank Cruz<small class="text-muted float-right">18 mins</small>
                                                <div class="font-13">Lorem Ipsum is simply.</div>
                                            </div>
                                        </div>
                                    </a>
                                    <a class="list-group-item">
                                        <div class="media">
                                            <div class="media-img">
                                                <img src=@Url.Content("~/img/employee_transfer-512.png")>
                                            </div>
                                            <div class="media-body">
                                                <div class="font-strong"></div>Rose Pearson<small class="text-muted float-right">3 hrs</small>
                                                <div class="font-13">Lorem Ipsum is simply.</div>
                                            </div>
                                        </div>
                                    </a>
                                </div>
                            </li>
                        </ul>
                    </li>
                    <li class="dropdown dropdown-notification">
                        <a class="nav-link dropdown-toggle" data-toggle="dropdown" id="noti"><i class="fa fa-bell-o rel" id="countnoti"></i></a>
                        <ul class="dropdown-menu dropdown-menu-right dropdown-menu-media" id="content">
                            <li class="dropdown-menu-header" id="countheader">


                            </li>
                            <li class="list-group list-group-divider scroller" data-height="240px" data-color="#71808f" id="maincontent">

                            </li>
                           
                        </ul>
                    </li>
                    <li class="dropdown dropdown-user">
                        <a class="nav-link dropdown-toggle link" data-toggle="dropdown">
                            <img src=@Url.Content("~/img/admin-avatar.png")>
                            <span></span>Admin<i class="fa fa-angle-down m-l-5"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-right">
                            <a class="dropdown-item" href="profile.html"><i class="fa fa-user"></i>Profile</a>
                            <a class="dropdown-item" href="profile.html"><i class="fa fa-cog"></i>Settings</a>
                            <a class="dropdown-item" href="javascript:;"><i class="fa fa-support"></i>Support</a>
                            <li class="dropdown-divider"></li>
                            <a class="dropdown-item" href="login.html"><i class="fa fa-power-off"></i>Logout</a>
                        </ul>
                    </li>
                </ul>
                <!-- END TOP-RIGHT TOOLBAR-->
            </div>
             
        </header>
       
        <!-- END HEADER-->
        <!-- START SIDEBAR-->
        <nav class="page-sidebar" id="sidebar">
            <div id="sidebar-collapse">
                <div class="admin-block d-flex">
                    <div>
                        <img src=@Url.Content("~/img/admin-avatar.png")>
                    </div>
                    <div class="admin-info">
                        <div class="font-strong">
                            <fieldset>
                                @if (Session["UserName"] != null)
                                {
                                    <text> @Session["UserName"].ToString() </text>
                                }
                            </fieldset>
                        </div>
                        <small>
                            @if (Session["RoleName"] != null)
                            {
                                <text> @Session["RoleName"].ToString() </text>
                            }
                        </small>
                    </div>
                </div>
                <ul class="side-menu metismenu">
                    <li>
                        <a class="active" href="index.html">
                            <i class="sidebar-item-icon fa fa-th-large"></i>
                            <span class="nav-label">Dashboard</span>
                        </a>
                    </li>
                    <li class="heading">ADMIN TASK</li>
                    <li>
                        <a href="javascript:;">
                            <i class="sidebar-item-icon fa fa-bookmark"></i>
                            <span class="nav-label">Manage Users</span><i class="fa fa-angle-left arrow"></i>
                        </a>
                        <ul class="nav-2-level collapse">
                            <li>@Html.ActionLink("Create User", "CreateUsers", "Admin")</li>
                            <li>@Html.ActionLink("View Users", "UserList", "Admin")</li>
                            <li>@Html.ActionLink("Assign Role", "Assignroles", "Admin")</li>
                        </ul>
                    </li>
                    <li>
                        <a href="javascript:;">
                            <i class="sidebar-item-icon fa fa-edit"></i>
                            <span class="nav-label">Organization Structure</span><i class="fa fa-angle-left arrow"></i>
                        </a>
                        <ul class="nav-2-level collapse">
                            <li>@Html.ActionLink("Define Structure", "", "Admin")</li>
                            <li>
                                <a href="form_advanced.html">Advanced Plugins</a>
                            </li>
                            <li>
                                <a href="form_masks.html">Form input masks</a>
                            </li>
                            <li>
                                <a href="form_validation.html">Form Validation</a>
                            </li>
                            <li>
                                <a href="text_editors.html">Text Editors</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="javascript:;">
                            <i class="sidebar-item-icon fa fa-table"></i>
                            <span class="nav-label">Recruitment</span><i class="fa fa-angle-left arrow"></i>
                        </a>
                        <ul class="nav-2-level collapse">
                            @if (Session["RoleName"].ToString() == "Admin" && Session["isAdmin"].ToString() == "Admin")
                            {
                                <li>@Html.ActionLink("Create Vacancy", "CreateVacancy", "Recruitment")</li>
                                <li>@Html.ActionLink("View Vacancy", "ViewVacancy", "Recruitment")</li>
                                <li>@Html.ActionLink("Create Position", "Position", "Admin")</li>
                                <li>@Html.ActionLink("View Applications", "ViewApplications", "Recruitment")</li>
                                <li>@Html.ActionLink("View Candidate", "ViewCandidate", "Recruitment")</li>
                                <li>@Html.ActionLink("View Marks", "ViewMarks", "Recruitment")</li>
                                <li>@Html.ActionLink("View ShortListed Candidates", "ViewShortlistedcandidate", "Recruitment")</li>
                                <li>@Html.ActionLink("Transfer Request", "RequestTransfer", "Requests")</li>

                                <li>@Html.ActionLink("Logout", "Logout", "Account")</li>
                            }
                            @if (Session["RoleName"].ToString() == "Recruitment Manager")
                            {

                                <li>@Html.ActionLink("Create Vacancy", "CreateVacancy", "Recruitment")</li>
                                <li>@Html.ActionLink("View Vacancy", "ViewVacancy", "Recruitment")</li>
                                <li>@Html.ActionLink("Transfer Request", "RequestTransfer", "Requests")</li>

                                <li>@Html.ActionLink("Logout", "Logout", "Account")</li>
                            }

                            @if (Session["RoleName"].ToString() == "Recruitment Officer")
                            {

                                <li>@Html.ActionLink("View Applications", "ViewApplications", "Recruitment")</li>
                                <li>@Html.ActionLink("View Candidate", "ViewCandidate", "Recruitment")</li>

                                <li>@Html.ActionLink("View Marks", "ViewMarks", "Recruitment")</li>
                                <li>@Html.ActionLink("Transfer Request", "RequestTransfer", "Requests")</li>

                                <li>@Html.ActionLink("Logout", "Logout", "Account")</li>
                            }
                            @if (Session["RoleName"].ToString() == "DGM")
                            {
                                <li>@Html.ActionLink("View ShortListed Candidates", "ViewShortlistedcandidate", "Recruitment")</li>
                                <li>@Html.ActionLink("Transfer Request", "RequestTransfer", "Requests")</li>

                                <li>@Html.ActionLink("Logout", "Logout", "Account")</li>
                            }

                        </ul>
                    </li>
                    <li>
                        <a href="javascript:;">
                            <i class="sidebar-item-icon fa fa-bar-chart"></i>
                            <span class="nav-label">Charts</span><i class="fa fa-angle-left arrow"></i>
                        </a>
                        <ul class="nav-2-level collapse">
                            <li>
                                <a href="charts_flot.html">Flot Charts</a>
                            </li>
                            <li>
                                <a href="charts_morris.html">Morris Charts</a>
                            </li>
                            <li>
                                <a href="chartjs.html">Chart.js</a>
                            </li>
                            <li>
                                <a href="charts_sparkline.html">Sparkline Charts</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="javascript:;">
                            <i class="sidebar-item-icon fa fa-map"></i>
                            <span class="nav-label">Maps</span><i class="fa fa-angle-left arrow"></i>
                        </a>
                        <ul class="nav-2-level collapse">
                            <li>
                                <a href="maps_vector.html">Vector maps</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="icons.html">
                            <i class="sidebar-item-icon fa fa-smile-o"></i>
                            <span class="nav-label">Icons</span>
                        </a>
                    </li>
                    <li class="heading">PAGES</li>
                    <li>
                        <a href="javascript:;">
                            <i class="sidebar-item-icon fa fa-envelope"></i>
                            <span class="nav-label">Mailbox</span><i class="fa fa-angle-left arrow"></i>
                        </a>
                        <ul class="nav-2-level collapse">
                            <li>
                                <a href="mailbox.html">Inbox</a>
                            </li>
                            <li>
                                <a href="mail_view.html">Mail view</a>
                            </li>
                            <li>
                                <a href="mail_compose.html">Compose mail</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="calendar.html">
                            <i class="sidebar-item-icon fa fa-calendar"></i>
                            <span class="nav-label">Calendar</span>
                        </a>
                    </li>
                    <li>
                        <a href="javascript:;">
                            <i class="sidebar-item-icon fa fa-file-text"></i>
                            <span class="nav-label">Pages</span><i class="fa fa-angle-left arrow"></i>
                        </a>
                        <ul class="nav-2-level collapse">
                            <li>
                                <a href="invoice.html">Invoice</a>
                            </li>
                            <li>
                                <a href="profile.html">Profile</a>
                            </li>
                            <li>
                                <a href="login.html">Login</a>
                            </li>
                            <li>
                                <a href="register.html">Register</a>
                            </li>
                            <li>
                                <a href="lockscreen.html">Lockscreen</a>
                            </li>
                            <li>
                                <a href="forgot_password.html">Forgot password</a>
                            </li>
                            <li>
                                <a href="error_404.html">404 error</a>
                            </li>
                            <li>
                                <a href="error_500.html">500 error</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="javascript:;">
                            <i class="sidebar-item-icon fa fa-sitemap"></i>
                            <span class="nav-label">Menu Levels</span><i class="fa fa-angle-left arrow"></i>
                        </a>
                        <ul class="nav-2-level collapse">
                            <li>
                                <a href="javascript:;">Level 2</a>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <span class="nav-label">Level 2</span><i class="fa fa-angle-left arrow"></i>
                                </a>
                                <ul class="nav-3-level collapse">
                                    <li>
                                        <a href="javascript:;">Level 3</a>
                                    </li>
                                    <li>
                                        <a href="javascript:;">Level 3</a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </nav>
        <!-- END SIDEBAR-->
        <div class="content-wrapper">
            <div class="box  box-primary box-body">
                <div class="page-content fade-in-up">
                    <input type="hidden" id="getcountvalue"/>
                    <div class="ibox">
                        @RenderBody()
                    </div>
                </div>
            </div>
        </div>
    </div>
        <div class="sidenav-backdrop backdrop"></div>
        <div class="preloader-backdrop">
            <div style="text-align:center;height:300px">
                <img src="~/img/InternetSlowdown_Day.gif" />
            </div>
        </div>

        <script src="~/Scripts/jquery.min.js" type="text/javascript"></script>
        <script src="~/Scripts/jquery.unobtrusive-ajax.js"></script>
        <script src="~/Scripts/popper.min.js" type="text/javascript"></script>
        <script src="~/Scripts/bootstrap.min.js" type="text/javascript"></script>
        <script src="~/Scripts/metisMenu.min.js" type="text/javascript"></script>
        <script src="~/Scripts/jquery.slimscroll.min.js" type="text/javascript"></script>
        <!-- CORE SCRIPTS-->
        <script src="~/Scripts/app.min.js" type="text/javascript"></script>
        <!-- PAGE LEVEL SCRIPTS-->
        <script src="~/Scripts/dashboard_1_demo.js" type="text/javascript"></script>
        <script src="~/Scripts/datatables.min.js"></script>
        <script src="~/Scripts/jquery.validate.min.js"></script>
        <script src="~/Scripts/sweetalert.min.js"></script>
        <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
        <script src="~/Scripts/alertify.min.js"></script>
        <script src="~/Scripts/notify.min.js"></script>
        <script src="~/Scripts/jquery-ui-1.12.1.js"></script>
        <script src="~/Scripts/jquery.timeselector.js"></script>
       <script type="text/javascript">
           $(function () {
               $("#noti").click(function (e) {
                   e.stopPropagation();

                    $("#content").show();
                   var count = 0;
                   count = parseInt($('span.notify-signal').html()) || 0;
                   updatenoticontent();
                   updatenoticontentres();
                   $('#countnoti', this).html('&nbsp;');
               })
               $('html').click(function () {
                   $("#content").hide();

               })
               function updatenoticontent(){
                   $("#maincontent").empty();
                   $("#maincontent").append($('<li>Loading...</li>'))
                   $.ajax({
                       type: 'GET',
                       url: '/Notifications/GetReqNoti',
                       success: function (response) {
                           $("#maincontent").empty();
                           if (response.length == 0) {
                               $("#maincontent").append($('<a class="list-group-item"> <div class="media"> <div class="media-body"> <div class="font-13">No Notification</div></div></div></a>'))
                           }
                           $.each(response, function (i, v1) {
                               $("#maincontent").append($('<div><a href="@Url.Action("TransferResponse","Requests")/' + v1.RequestId + '" class="list-group-item"> <div class="media"><div class="media-img"> <img src=@Url.Content("~/img/employee_transfer-512.png")></div> <div class="media-body"><div class="font-13" style="color:black;">' + v1.EmployeeName + ' has requested for transfer</div></div></div></a></div>'))
                           });
                       },
                       error: function (error) {
                           console.log(error);
                       }
                   })
                   

               }
               function updatenoticontentres() {
                   $("#maincontent").empty();
                   $("#maincontent").append($('<li>Loading...</li>'))
                   $.ajax({
                       type: 'GET',
                       url: '/Notifications/GetReqNotires',
                       success: function (responses) {
                          
                           $.each(responses, function (i, v) {
                               $("#maincontent").append($('<div><a class="list-group-item"> <div class="media"><div class="media-img"> <img src=@Url.Content("~/img/employee_transfer-512.png")></div> <div class="media-body"><div class="font-13" style="color:black;">Your "' + v.RequestType + '" request has been "' + v.Status + '"</div></div></div></a></div>'))
                           });
                       },
                       error: function (error) {
                           console.log(error);
                       }
                   })

               }            
               
           })
           $(function () {
               $.ajax({
                   type: 'GET',
                   url: '/Notifications/GetReqNoticount',
                   success: function (data) {
                       $("#countnoti").empty();
                       $("#countheader").empty();
                      
                       $.each(data, function (i, v) {
                           $("#getcountvalue").html(v.count);
                           if (v.count == 0) {
                               $("#countnoti").append($('<span class="notify-signal">&nbsp;</span>'))
                               $("#countheader").append($('<div><span><strong>No New</strong> Notification</span></div>'))
                           }
                           else {
                               $("#countnoti").append($('<span style="color:red;">' + v.count + '</span>'))
                               $("#countheader").append($('<div><span><strong>' + v.count + ' New</strong> Notifications</span></div>'))
                           }
                       });

                   },
                   error: function (error) {
                       console.log(error);
                   }
               })
              
           })
       </script>
        
        @RenderSection("scripts", required: false)
</body>
</html>
